# ============================================
# Jiffoo - Environment Configuration Example
# ============================================
#
# QUICK START:
#   1. Copy this file: cp .env.example .env
#   2. Start dependencies: docker compose up -d postgres redis
#   3. Run migrations: pnpm db:migrate
#   4. Start dev server: pnpm dev
#
# MARKERS:
#   [REQUIRED]   - Must be configured for the app to start
#   [PRODUCTION] - Must be changed in production environments
#
# ============================================

# ============================================
# Build Information (Injected by CI/CD)
# ============================================
BUILD_SHA="development"
BUILD_TIME="2025-01-01T00:00:00Z"
APP_VERSION="1.0.0-alpha"

# ============================================
# Database Configuration [REQUIRED]
# ============================================
# PostgreSQL connection string
# Format: postgresql://user:password@host:port/database?schema=core
DATABASE_URL="postgresql://postgres:postgres@localhost:5432/jiffoo?schema=core"

# Redis connection string
# Format: redis://[:password@]host:port[/db]
REDIS_URL="redis://localhost:6379"

# ============================================
# API Configuration [REQUIRED]
# ============================================
API_PORT=3001
API_HOST="0.0.0.0"

# CORS Configuration - Comma-separated list of allowed origins
CORS_ORIGIN="http://localhost:3000,http://localhost:3002,http://localhost:3003"
CORS_ENABLED="true"
CORS_CREDENTIALS="true"

# ============================================
# Environment Configuration
# ============================================
# Environment: development | production | test
NODE_ENV="development"

# Log level: error | warn | info | debug | trace
LOG_LEVEL="debug"

# ============================================
# JWT Authentication [REQUIRED] [PRODUCTION]
# ============================================
# ⚠️ CHANGE IN PRODUCTION! Use a strong random string.
# Generate: openssl rand -base64 32
JWT_SECRET="jiffoo-default-secret-key-change-it"
JWT_EXPIRES_IN="7d"
JWT_REFRESH_EXPIRES_IN="30d"

# ============================================
# URLs and Domains
# ============================================
# Public URL of the API Service
API_SERVICE_URL="http://localhost:3001"

# Public URLs for frontend applications
NEXT_PUBLIC_API_URL="/api"
NEXT_PUBLIC_ADMIN_URL="http://localhost:3002"
NEXT_PUBLIC_SHOP_URL="http://localhost:3003"

# ============================================
# Payment Gateway (Stripe) [OPTIONAL]
# ============================================
STRIPE_SECRET_KEY="your_stripe_secret_key"
STRIPE_PUBLISHABLE_KEY="your_stripe_publishable_key"
NEXT_PUBLIC_STRIPE_PUBLISHABLE_KEY="your_stripe_publishable_key"
STRIPE_WEBHOOK_SECRET="your_stripe_webhook_secret"

# ============================================
# Authentication Providers [OPTIONAL]
# ============================================
# Google OAuth
GOOGLE_CLIENT_ID="your_google_client_id"
GOOGLE_CLIENT_SECRET="your_google_client_secret"
GOOGLE_REDIRECT_URI="http://localhost:3001/api/auth/google/callback"

# ============================================
# Email Service (Resend) [OPTIONAL]
# ============================================
RESEND_API_KEY="your_resend_api_key"
RESEND_WEBHOOK_SECRET="your_resend_webhook_secret"

# Email sender identity
EMAIL_FROM="noreply@example.com"
EMAIL_FROM_NAME="Jiffoo Shop"
EMAIL_REPLY_TO="support@example.com"

# ============================================
# Storage (MinIO/S3) [OPTIONAL]
# ============================================
# S3 compatible storage for file uploads
STORAGE_TYPE="local" # local | s3
MINIO_ENDPOINT="localhost"
MINIO_PORT=9000
MINIO_USE_SSL="false"
MINIO_ACCESS_KEY="minioadmin"
MINIO_SECRET_KEY="minioadmin"
MINIO_BUCKET="jiffoo-uploads"

# ============================================
# Security & Observability [OPTIONAL]
# ============================================
# Sentry for error tracking
NEXT_PUBLIC_SENTRY_DSN=""

# Rate limiting
RATE_LIMIT_MAX=100
RATE_LIMIT_WINDOW_MS=60000

# ============================================
# Development Only
# ============================================
# Skip email verification for easier setup
SKIP_EMAIL_VERIFICATION="true"
DEMO_MODE="false"

# Marketplace integration (Alpha Gate: Disabled by default)
ENABLE_MARKETPLACE="false"
