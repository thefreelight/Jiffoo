# Jiffoo Mall 插件系统

## 🏗️ 插件架构

### 📂 目录结构

```
plugins/
├── 🆓 core/                    # 核心插件系统 (开源)
│   ├── plugin-manager.ts       # 插件管理器
│   ├── plugin-loader.ts        # 插件加载器
│   ├── hook-system.ts          # 钩子系统
│   └── license-validator.ts    # 许可证验证
│
├── 🆓 examples/                # 示例插件 (开源)
│   ├── basic-payment/          # 基础支付示例
│   ├── simple-email/           # 简单邮件通知
│   └── demo-auth/              # 演示认证插件
│
├── 🆓 auth-providers/          # 认证提供者框架 (开源)
│   ├── base-auth-plugin.ts     # 基础认证插件类
│   └── oauth2-routes.ts        # OAuth2路由处理
│
└── 💰 commercial/              # 商业插件 (私有仓库)
    ├── wechat-pay/             # 微信支付 ($29.99/月)
    ├── alipay/                 # 支付宝 ($29.99/月)
    ├── stripe-pro/             # Stripe高级版 ($39.99/月)
    ├── email-marketing/        # 邮件营销 ($49.99/月)
    ├── smart-recommendations/  # 智能推荐 ($79.99/月)
    └── enterprise-auth/        # 企业认证 ($99.99/月)
```

## 🔄 重构计划

### Phase 1: 分离商业代码
1. 将现有的微信支付、支付宝等移到私有仓库
2. 保留基础支付接口作为示例
3. 创建许可证验证系统
4. 建立插件商店API

### Phase 2: 开源版本优化
1. 简化认证插件为演示版本
2. 提供完整的插件开发文档
3. 创建插件开发工具
4. 建立社区贡献流程

### Phase 3: 商业插件开发
1. 开发高级支付插件
2. 创建营销自动化插件
3. 建立企业级功能
4. 提供专业技术支持

## 🆓 开源插件特性

### 基础支付插件
- 支持基础的信用卡支付
- 简单的订单处理
- 基本的支付状态管理
- 演示级别的功能

### 简单邮件通知
- 基础的邮件发送
- 订单确认邮件
- 简单的模板系统
- SMTP配置

### 演示认证插件
- OAuth 2.0基础实现
- Google登录示例
- 基本的用户信息同步
- 演示级别的功能

## 💰 商业插件特性

### 微信支付插件 ($29.99/月)
- 完整的微信支付API集成
- 支持小程序支付
- 自动对账功能
- 退款处理
- 技术支持

### 支付宝插件 ($29.99/月)
- 完整的支付宝API集成
- 支持花呗分期
- 自动对账功能
- 退款处理
- 技术支持

### 邮件营销插件 ($49.99/月)
- 高级邮件模板
- 自动化营销流程
- A/B测试功能
- 详细的分析报告
- 客户分群功能

## 🔐 许可证系统

### 许可证验证流程
1. 插件启动时验证许可证
2. 定期检查许可证状态
3. 域名绑定验证
4. 使用量监控

### 许可证类型
- **开发版**: 免费，仅限开发环境
- **单站点**: $X/月，单个域名
- **多站点**: $X/月，最多5个域名
- **企业版**: $X/月，无限域名 + 支持

## 📚 开发文档

### 插件开发指南
1. 插件结构规范
2. API接口文档
3. 钩子系统使用
4. 最佳实践指南

### 示例代码
1. 基础插件模板
2. 支付插件示例
3. 认证插件示例
4. UI组件示例

---

这个架构确保了：
✅ 开源版本功能完整但基础
✅ 商业版本有明确的价值提升
✅ 插件系统可扩展
✅ 许可证保护商业利益
