# Jiffoo Mall (Open Source) - Internal Ingress (VPN Access)
# 子域名模式: shop.lafdru.local, api.lafdru.local, admin.lafdru.local
apiVersion: networking.k8s.io/v1
kind: Ingress
metadata:
  name: jiffoo-opensource-internal
  namespace: jiffoo-opensource
  labels:
    app.kubernetes.io/name: jiffoo-opensource
    app.kubernetes.io/component: ingress
  annotations:
    kubernetes.io/ingress.class: nginx
    nginx.ingress.kubernetes.io/proxy-body-size: "100m"
    nginx.ingress.kubernetes.io/proxy-read-timeout: "3600"
    nginx.ingress.kubernetes.io/proxy-send-timeout: "3600"
spec:
  rules:
    # Shop Frontend - shop.lafdru.local
    - host: shop.lafdru.local
      http:
        paths:
          - path: /
            pathType: Prefix
            backend:
              service:
                name: shop-service
                port:
                  number: 3004
    # API Backend - api.lafdru.local
    - host: api.lafdru.local
      http:
        paths:
          - path: /
            pathType: Prefix
            backend:
              service:
                name: api-service
                port:
                  number: 3001
    # Admin Dashboard - admin.lafdru.local
    - host: admin.lafdru.local
      http:
        paths:
          - path: /
            pathType: Prefix
            backend:
              service:
                name: admin-service
                port:
                  number: 3002
